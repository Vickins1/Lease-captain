<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GFB5LRVMW6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-GFB5LRVMW6');
    </script>

    <!-- Meta Tags -->
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="Discover Lease Captain, The Safest and Secure Way to Lease, Rent and Manage your properties!">
    <meta name="author" content="Lease Captain Team">
    <meta name="robots" content="index, follow">
    <title>Lease Captain - Properties in Kenya</title>
    
    <!-- Open Graph and Twitter Tags -->
    <meta property="og:title" content="Lease Captain - Advanced Property Management Software">
    <meta property="og:description" content="Manage properties effortlessly with Lease Captain's powerful features.">
    <meta property="og:image" content="https://leasecaptain.com/images/banner1.jpeg">
    <meta property="og:url" content="https://leasecaptain.com">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lease Captain - Advanced Property Management Software">
    <meta name="twitter:description" content="Manage properties effortlessly with Lease Captain's powerful features.">
    <meta name="twitter:image" content="https://leasecaptain.com/images/banner1.jpeg">

    <link rel="canonical" href="https://leasecaptain.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" sizes="56x56" href="/assets/images/1.png">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/animate.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/all.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/flaticon.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/theme-default.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/meanmenu.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/owl.transitions.css" type="text/css" media="all">
    <link rel="stylesheet" href="/venobox/venobox.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/bootstrap-icons.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/slick/slick.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/slick/slick-theme.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/dropdown.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/responsive.css" type="text/css" media="all">
    <link rel="stylesheet" href="/assets/css/rangeslider.css" type="text/css" media="all">

    <!-- Custom Styles -->
    <style>
        .property-search {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .property-card {
            height: 100%;
            display: flex;
            flex-direction: column;
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            background: #fff;
        }
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .property-image {
            height: 220px;
            object-fit: cover;
            width: 100%;
        }
        .property-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .property-price {
            background: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            position: absolute;
            top: 10px;
            right: 10px;
            font-weight: bold;
        }
        .search-form input, .search-form select {
            border-radius: 25px;
            padding: 12px 20px;
            border: 1px solid #ddd;
            margin-right: 10px;
        }
        .search-form button {
            border-radius: 25px;
            padding: 12px 30px;
            background: #1685b6;
            border: none;
            color: white;
            transition: background 0.3s ease;
        }
        .search-form button:hover {
            background: #0056b3;
        }
        .property-features {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }
        .feature-tag {
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9em;
        }
    </style>

    <script src="/assets/js/vendor/modernizr-3.5.0.min.js"></script>
</head>

<body>
    <!-- Preloader -->
    <div class="preloader">
        <div class="circles">
            <div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div>
            <div class="circle5"></div><div class="circle6"></div><div class="circle7"></div><div class="circle8"></div>
            <div class="circle9"></div><div class="circle10"></div><div class="circle11"></div><div class="circle12"></div>
            <div class="circle13"></div><div class="circle14"></div><div class="circle15"></div>
        </div>
    </div>

    <!-- Header Area -->
    <header class="header-area" id="sticky-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-3">
                    <div class="logo">
                        <a href="/"><img src="assets/images/2.png" style="height: 70px; width: 80px;" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="header-menu">
                        <ul>
                            <li><a href="/">Home</a></li>
                           
                            <li><a href="#">Blog <i class="bi bi-chevron-down"></i></a>
                                <div class="sub-menu">
                                    <ul>
                                        <li><a href="/blog">Blog</a></li>
                                        <li><a href="/blog-details">Blog Details</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li><a href="/contacts">Contacts</a></li>
                        </ul>
                        <div class="hamilton-btn slider">
                            <a href="/login">Sign-in</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu-area sticky-menu" id="navbar">
        <div class="mobile-menu">
            <div class="mobile-logo">
                <a href="/"><img src="/assets/images/2.png" style="height: 65px; width: 80px;" alt=""></a>
            </div>
            <div class="side-menu-info">
                <div class="sidebar-menu">
                    <a class="navSidebar-button" href="/"><i class="bi bi-justify-right"></i></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Properties Area with Search -->
    <div class="service-area py-5">
        <div class="container">
            <!-- Search Form -->
            <div class="property-search">
                <form class="search-form row g-3" id="propertySearchForm">
                    <div class="col-md-4">
                        <input type="text" name="location" id="location" class="form-control" placeholder="Location">
                    </div>
                    <div class="col-md-3">
                        <select name="bedrooms" id="bedrooms" class="form-control">
                            <option value="">Bedrooms</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4+">4+</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select name="price" id="price" class="form-control">
                            <option value="">Price Range</option>
                            <option value="0-50000">0 - 50,000 KSh</option>
                            <option value="50000-100000">50,000 - 100,000 KSh</option>
                            <option value="100000-200000">100,000 - 200,000 KSh</option>
                            <option value="200000+">200,000+ KSh</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button type="button" class="btn w-100" id="clearBtn">Clear</button>
                    </div>
                </form>
            </div>

            <!-- Properties Listing -->
            <div class="row mb-4">
                <div class="col-lg-12">
                    <div class="section-title text-center">
                        <h2 class="mb-4">Latest Properties in Kenya</h2>
                    </div>
                </div>
            </div>

            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4" id="propertyList">
                <% if (properties && properties.length > 0) { %>
                    <% properties.forEach(property => { %>
                        <div class="col">
                            <div class="property-card">
                                <div class="position-relative">
                                    <img src="<%= property.images && property.images.length > 0 ? property.images[0] : '/assets/images/service/default.png' %>" 
                                         class="property-image" 
                                         alt="<%= property.name %>">
                                    <span class="property-price">KSh <%= property.price.toFixed(2) %>/month</span>
                                </div>
                                <div class="property-content">
                                    <h4 class="mb-2">
                                        <a href="/property/<%= property._id %>" class="text-decoration-none text-dark">
                                            <%= property.name || 'Unnamed Property' %>
                                        </a>
                                    </h4>
                                    <p class="text-muted flex-grow-1" style="min-height: 60px;">
                                        <%= property.description ? property.description.substring(0, 100) + (property.description.length > 100 ? '...' : '') : 'No description available.' %>
                                    </p>
                                    <div class="property-features">
                                        <span class="feature-tag"><i class="bi bi-house"></i> <%= property.bedrooms %> Bed</span>
                                        <span class="feature-tag"><i class="bi bi-droplet"></i> <%= property.bathrooms %> Bath</span>
                                        <% if (property.facilities && property.facilities[0]) { %>
                                            <span class="feature-tag"><i class="bi bi-check"></i> <%= property.facilities[0] %></span>
                                        <% } %>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-3">
                                        <span class="text-muted"><i class="bi bi-geo-alt"></i> <%= property.location || 'N/A' %></span>
                                        <a href="/property/<%= property._id %>" class="btn btn-custom" style="background-color: #1685b6; color: #fff;">
                                            More Info <i class="bi bi-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="col-12 text-center py-5">
                        <p class="text-muted">No properties found.</p>
                    </div>
                <% } %>
            </div>
        </div>
    </div>

    <!-- Enhanced Footer -->
    <div class="footer-area style-two">
        <div class="container">
            <div class="row align-items-center mb-5 py-5">
                <div class="col-lg-9">
                    <div class="footer-content">
                        <h2 class="mb-3">Find Your Dream Property in Kenya</h2>
                        <p>Explore our curated selection of premium properties across Kenya with Lease Captain.</p>
                    </div>
                </div>
            </div>
            <div class="row border-top pt-4">
                <div class="col-lg-12">
                    <div class="copyright-text text-center">
                        <p>Copyright © <a href="#">Lease Captain</a> All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="assets/js/vendor/jquery-3.6.2.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="venobox/venobox.js"></script>
    <script src="assets/js/animated-text.js"></script>
    <script src="venobox/venobox.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <script src="assets/js/jquery.meanmenu.js"></script>
    <script src="assets/js/jquery.scrollUp.js"></script>
    <script src="assets/js/slick/slick.min.js"></script>
    <script src="assets/js/jquery.barfiller.js"></script>
    <script src="assets/js/rangeslider.js"></script>
    <script src="assets/js/mixitup.min.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/script.js"></script>

<!-- Filtering Script -->
<script>
       $(document).ready(function() {
           // Store original property elements
           const $propertyContainer = $('#propertyList');
           const $originalProperties = $propertyContainer.children('.col').clone();
       
           // Function to filter and display properties
           function filterProperties() {
               const filters = {
                   location: $('#location').val().trim().toLowerCase(),
                   bedrooms: $('#bedrooms').val(),
                   price: $('#price').val()
               };
       
               let $filteredProperties = $originalProperties.filter(function() {
                   const $property = $(this);
                   const priceText = $property.find('.property-price').text().replace('KSh ', '').replace('/month', '');
                   const price = parseFloat(priceText);
                   const bedrooms = parseInt($property.find('.property-features .feature-tag:contains("Bed")').text()) || 0;
                   // Improved location extraction - adjust selector based on your actual HTML structure
                   const location = ($property.find('.property-location').text() || 
                                   $property.find('[class*="location"]').text() || 
                                   $property.find('.text-muted').text()).trim().toLowerCase();
       
                   // Location filter - check if location contains the search term
                   if (filters.location && location.indexOf(filters.location) === -1) return false;
       
                   // Bedrooms filter
                   if (filters.bedrooms) {
                       if (filters.bedrooms === '4+' && bedrooms < 4) return false;
                       else if (filters.bedrooms !== '4+' && bedrooms !== parseInt(filters.bedrooms)) return false;
                   }
       
                   // Price filter
                   if (filters.price) {
                       const [min, max] = filters.price.split('-');
                       if (price < parseInt(min)) return false;
                       if (max && price > parseInt(max)) return false;
                   }
       
                   return true;
               });
       
               updatePropertyList($filteredProperties);
           }
       
           // Function to update property list
           function updatePropertyList($properties) {
               $propertyContainer.empty();
               if ($properties.length === 0) {
                   $propertyContainer.html('<div class="col-12 text-center py-5"><p class="text-muted">No properties found matching your criteria.</p></div>');
               } else {
                   $propertyContainer.append($properties);
               }
           }
       
           // Real-time filtering
           $('#location').on('input', filterProperties); // Filter while typing
           $('#bedrooms, #price').on('change', filterProperties); // Filter on selection
           $('#clearBtn').on('click', function() {
               $('#location').val('');
               $('#bedrooms').val('');
               $('#price').val('');
               filterProperties();
           });
       
           // Initial display
           filterProperties();
       });
       </script>
</body>
</html>